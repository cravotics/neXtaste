<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>neXtaste - Your Next Taste Will Be Bliss</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;600;700;800&family=Orbitron:wght@400;700;900&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'display': ['Playfair Display', 'serif'],
                        'hero': ['Orbitron', 'monospace'],
                    },
                    animation: {
                        'morph': 'morph 8s ease-in-out infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'slideInUp': 'slideInUp 0.8s ease-out',
                        'slideInRight': 'slideInRight 0.6s ease-out',
                        'slideInLeft': 'slideInLeft 0.6s ease-out',
                        'fadeInScale': 'fadeInScale 0.7s ease-out',
                        'pulse-slow': 'pulse 3s ease-in-out infinite',
                        'bounce-slow': 'bounce 2s ease-in-out infinite',
                        'gradient-shift': 'gradient-shift 4s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'superhero-entry': 'superhero-entry 2s cubic-bezier(0.68, -0.55, 0.265, 1.55)',
                        'x-glow': 'x-glow 1.5s ease-in-out infinite alternate',
                        'x-flicker': 'x-flicker 0.1s ease-in-out infinite',
                        'slogan-slide': 'slogan-slide 3s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1s forwards',
                        'logo-morph': 'logo-morph 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                        'loading-to-brand': 'loading-to-brand 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards',
                        'brand-complete': 'brand-complete 1s ease-out 3.5s forwards',
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                        'gradient-conic': 'conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))',
                        'hero-gradient': 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',
                        'x-gradient': 'linear-gradient(45deg, #00d4ff, #ff00ff, #ffff00, #00ff00)',
                    },
                    boxShadow: {
                        'glow': '0 0 20px rgba(59, 130, 246, 0.5)',
                        'glow-lg': '0 0 30px rgba(59, 130, 246, 0.4)',
                        'morphic': '0 8px 32px rgba(0, 0, 0, 0.12)',
                        'inner-glow': 'inset 0 2px 4px rgba(255, 255, 255, 0.1)',
                        'superhero': '0 0 50px rgba(0, 212, 255, 0.8), 0 0 100px rgba(255, 0, 255, 0.6), inset 0 0 30px rgba(255, 255, 255, 0.2)',
                        'x-glow': '0 0 30px rgba(0, 212, 255, 1), 0 0 60px rgba(255, 0, 255, 0.8), 0 0 90px rgba(255, 255, 0, 0.6)',
                    },
                    backdropBlur: {
                        'xs': '2px',
                    },
                    transform: {
                        'slant-hero': 'skew(-15deg) rotateY(15deg) scale(1.1)',
                    }
                }
            }
        }
    </script>
    
    <style>
        @keyframes morph {
            0%, 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
            50% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 10px rgba(59, 130, 246, 0.5); }
            to { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
        }

        .glass-morphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .morphing-bg {
            background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c);
            background-size: 400% 400%;
            animation: gradient-shift 8s ease infinite;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .feature-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .feature-card:hover {
            transform: translateY(-8px) scale(1.02);
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }

        .dropdown-enter {
            opacity: 0;
            transform: translateY(-10px);
        }
        
        .dropdown-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        .tab-indicator {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .restaurant-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .restaurant-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-screen font-sans antialiased" x-data="tasteTrailApp()">
    <!-- Professional Loading Screen -->
    <div x-show="initialLoading" 
         x-transition:leave="transition ease-in duration-1000"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 overflow-hidden pixar-loading"
         id="loadingScreen">
        
        <!-- Pixar-style animated background -->
        <div class="absolute inset-0 pixar-background">
            <!-- Floating orbs with neon glow -->
            <div class="floating-orb orb-1"></div>
            <div class="floating-orb orb-2"></div>
            <div class="floating-orb orb-3"></div>
            <div class="floating-orb orb-4"></div>
            <div class="floating-orb orb-5"></div>
            
            <!-- Atmospheric light rays -->
            <div class="light-ray ray-1"></div>
            <div class="light-ray ray-2"></div>
            <div class="light-ray ray-3"></div>
        </div>
        
        <!-- Main loading content -->
        <div class="text-center relative z-10">
            <!-- Elegant logo with cursive styling -->
            <div class="cursive-logo-container">
                <h1 class="cursive-brand-title">
                    <span class="cursive-text">ne</span>
                    <span class="cursive-x" id="loadingX">X</span>
                    <span class="cursive-text">taste</span>
                </h1>
                <div class="elegant-subtitle">Your next taste will be bliss</div>
            </div>
            
            <!-- Professional loading animation -->
            <div class="elegant-loader mt-12">
                <div class="loader-orbit">
                    <div class="orbit-ring ring-1"></div>
                    <div class="orbit-ring ring-2"></div>
                    <div class="orbit-ring ring-3"></div>
                    <div class="orbit-center"></div>
                </div>
                <div class="loading-status mt-6">
                    <div class="status-text">Crafting Culinary Experience</div>
                    <div class="status-dots">
                        <span class="dot dot-1"></span>
                        <span class="dot dot-2"></span>
                        <span class="dot dot-3"></span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Pixar-style corner accents -->
        <div class="pixar-accent accent-top-left"></div>
        <div class="pixar-accent accent-top-right"></div>
        <div class="pixar-accent accent-bottom-left"></div>
        <div class="pixar-accent accent-bottom-right"></div>
    </div>

    <!-- Main App -->
    <div x-show="!initialLoading" class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900">
        <!-- Navigation Header -->
        <nav class="glass-morphism sticky top-0 z-40 border-b border-white/10">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center space-x-4">
                        <div class="w-10 h-10 bg-gradient-to-r from-cyan-400 via-purple-500 to-yellow-400 rounded-xl flex items-center justify-center animate-morph superhero-container">
                            <span class="text-white text-lg font-hero font-bold nav-x" id="navX" style="opacity: 0;">X</span>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold text-white font-hero">
                                ne<span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500 animate-x-glow">X</span>taste
                            </h1>
                            <p class="text-xs text-white/70 italic">Your next taste will be bliss</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <!-- Location Selector -->
                        <div class="relative" x-data="{ open: false }">
                            <button @click="open = !open" 
                                    class="flex items-center space-x-2 px-4 py-2 bg-white/10 rounded-lg text-white hover:bg-white/20 transition-all duration-200">
                                <i class="fas fa-map-marker-alt text-red-400"></i>
                                <span x-text="selectedLocation.name || 'Select Location'"></span>
                                <i class="fas fa-chevron-down text-xs" :class="{ 'rotate-180': open }"></i>
                            </button>
                            
                            <div x-show="open" 
                                 x-transition:enter="transition ease-out duration-200"
                                 x-transition:enter-start="opacity-0 scale-95"
                                 x-transition:enter-end="opacity-100 scale-100"
                                 @click.away="open = false"
                                 class="absolute right-0 mt-2 w-64 glass-card rounded-xl shadow-lg z-50">
                                <div class="p-2">
                                    <input type="text" 
                                           placeholder="Search locations..." 
                                           x-model="locationSearch"
                                           @input="searchLocations"
                                           class="w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="max-h-48 overflow-y-auto">
                                    <template x-for="location in filteredLocations" :key="location.id">
                                        <button @click="selectLocation(location); open = false"
                                                class="w-full text-left px-4 py-3 text-white hover:bg-white/10 transition-colors border-b border-white/5 last:border-b-0">
                                            <div class="flex items-center space-x-3">
                                                <i class="fas fa-map-marker-alt text-red-400"></i>
                                                <div>
                                                    <div class="font-medium" x-text="location.name"></div>
                                                    <div class="text-xs text-white/70" x-text="location.country"></div>
                                                </div>
                                            </div>
                                        </button>
                                    </template>
                                </div>
                            </div>
                        </div>
                        
                        <!-- User Profile -->
                        <div class="flex items-center space-x-2 px-3 py-2 bg-white/10 rounded-lg">
                            <div class="w-8 h-8 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                            <input type="text" 
                                   x-model="userId" 
                                   placeholder="User ID"
                                   class="bg-transparent text-white placeholder-white/50 outline-none w-20 text-sm">
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4">
            <!-- Hero Section -->
            <div class="text-center mb-8 superhero-container">
                <h1 class="text-5xl md:text-7xl font-display font-bold text-white mb-6 animate-slideInUp brand-transition">
                    Discover Your Ne<span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-500 to-yellow-400 animate-x-glow">X</span>t
                    <span class="gradient-text block transform skew-x-12">Culinary Bliss</span>
                </h1>
                <p class="text-xl text-white/80 max-w-3xl mx-auto mb-8 animate-slideInUp brand-slogan" style="animation-delay: 0.2s;">
                    Powered by superhero-grade AI and quantum taste intelligence, neXtaste delivers mind-blowing personalized food recommendations that transform every meal into pure bliss.
                </p>
                
                <!-- Superhero tagline -->
                <div class="brand-slogan text-2xl md:text-3xl font-display italic text-cyan-300 mb-8" style="animation-delay: 0.4s;">
                    "Your next taste will be bliss"
                </div>
                
                <!-- Simple AI Description -->
                <div class="text-center mb-12">
                    <p class="text-lg font-medium text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-300 to-gray-100 animate-pulse mb-1">
                        Powered by Gemini AI for deep taste analysis and personalized recommendations
                    </p>
                    <p class="text-lg font-medium text-transparent bg-clip-text bg-gradient-to-r from-gray-200 via-white to-gray-400 animate-pulse mb-1" style="animation-delay: 0.3s;">
                        OpenVINO-based computer vision for instant food recognition and analysis
                    </p>
                    <p class="text-lg font-medium text-transparent bg-clip-text bg-gradient-to-r from-gray-100 via-gray-300 to-white animate-pulse" style="animation-delay: 0.6s;">
                        Tasty AI engine combines flavor science with superhero-grade intelligence
                    </p>
                </div>
            </div>

            <!-- Time-Based Healthy Food Carousel -->
            <div class="mb-8" x-data="healthyCarousel()">
                <div class="text-center mb-6">
                    <h2 class="text-3xl font-bold text-white mb-2">
                        <span x-text="getCurrentMealTitle()"></span> 
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-500">Healthy Picks</span>
                    </h2>
                    <p class="text-white/70" x-text="getTimeBasedMessage()"></p>
                </div>

                <div class="relative overflow-hidden rounded-2xl">
                    <div class="flex transition-transform duration-500 ease-in-out" 
                         :style="`transform: translateX(-${currentSlide * 100}%)`">
                        <template x-for="(food, index) in healthyFoods" :key="index">
                            <div class="w-full flex-shrink-0 px-4">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <template x-for="item in food" :key="item.id">
                                        <div class="glass-card rounded-xl p-6 hover:scale-105 transition-transform duration-300 superhero-container">
                                            <div class="relative mb-4">
                                                <img :src="item.image" :alt="item.name" 
                                                     class="w-full h-48 object-cover rounded-lg">
                                                <div class="absolute top-2 right-2 bg-gradient-to-r from-green-400 to-blue-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                                    <span x-text="item.calories"></span> cal
                                                </div>
                                                <div class="absolute top-2 left-2 bg-gradient-to-r from-cyan-400 to-purple-500 text-white px-2 py-1 rounded-full text-xs">
                                                    <span x-text="item.mealType"></span>
                                                </div>
                                            </div>
                                            
                                            <h3 class="text-xl font-bold text-white mb-2" x-text="item.name"></h3>
                                            <p class="text-white/70 text-sm mb-4" x-text="item.description"></p>
                                            
                                            <!-- Nutritional Info -->
                                            <div class="grid grid-cols-3 gap-2 mb-4">
                                                <div class="text-center">
                                                    <div class="text-green-400 font-bold" x-text="item.protein + 'g'"></div>
                                                    <div class="text-xs text-white/60">Protein</div>
                                                </div>
                                                <div class="text-center">
                                                    <div class="text-blue-400 font-bold" x-text="item.carbs + 'g'"></div>
                                                    <div class="text-xs text-white/60">Carbs</div>
                                                </div>
                                                <div class="text-center">
                                                    <div class="text-yellow-400 font-bold" x-text="item.fat + 'g'"></div>
                                                    <div class="text-xs text-white/60">Fat</div>
                                                </div>
                                            </div>
                                            
                                            <!-- Health Benefits -->
                                            <div class="flex flex-wrap gap-1 mb-4">
                                                <template x-for="benefit in item.benefits" :key="benefit">
                                                    <span class="bg-gradient-to-r from-green-400/20 to-blue-500/20 text-green-300 px-2 py-1 rounded-full text-xs border border-green-400/30" 
                                                          x-text="benefit"></span>
                                                </template>
                                            </div>
                                            
                                            <button class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:from-green-500 hover:to-blue-600 transition-all duration-300 transform hover:scale-105">
                                                <i class="fas fa-heart mr-2"></i>
                                                Add to Favorites
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <!-- Carousel Controls -->
                    <div class="flex justify-center mt-6 space-x-2">
                        <template x-for="(_, index) in healthyFoods" :key="index">
                            <button @click="currentSlide = index" 
                                    :class="currentSlide === index ? 'bg-gradient-to-r from-cyan-400 to-purple-500' : 'bg-white/20'"
                                    class="w-3 h-3 rounded-full transition-all duration-300"></button>
                        </template>
                    </div>
                    
                    <!-- Auto-advance indicator -->
                    <div class="text-center mt-4">
                        <div class="inline-flex items-center space-x-2 text-white/60">
                            <i class="fas fa-clock text-cyan-400"></i>
                            <span class="text-sm">Updates based on your time zone</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Controls Panel -->
            <div class="glass-card rounded-2xl p-6 mb-8 animate-fadeInScale">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Meal Type Filter -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-white/80">Meal Type</label>
                        <select x-model="filters.mealType" 
                                class="w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Any Time</option>
                            <option value="breakfast">Breakfast</option>
                            <option value="lunch">Lunch</option>
                            <option value="dinner">Dinner</option>
                            <option value="snack">Snack</option>
                            <option value="dessert">Dessert</option>
                        </select>
                    </div>

                    <!-- Budget Range -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-white/80">Budget Range</label>
                        <select x-model="filters.budget" 
                                class="w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Any Budget</option>
                            <option value="low">$ Budget-Friendly</option>
                            <option value="medium">$$ Moderate</option>
                            <option value="high">$$$ Premium</option>
                            <option value="luxury">$$$$ Luxury</option>
                        </select>
                    </div>

                    <!-- Cuisine Type -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-white/80">Cuisine Type</label>
                        <select x-model="filters.cuisine" 
                                class="w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">All Cuisines</option>
                            <option value="italian">Italian</option>
                            <option value="asian">Asian</option>
                            <option value="mexican">Mexican</option>
                            <option value="american">American</option>
                            <option value="mediterranean">Mediterranean</option>
                            <option value="indian">Indian</option>
                        </select>
                    </div>

                    <!-- Distance -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-white/80">Distance</label>
                        <select x-model="filters.distance" 
                                class="w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Any Distance</option>
                            <option value="1">Within 1 mile</option>
                            <option value="5">Within 5 miles</option>
                            <option value="10">Within 10 miles</option>
                            <option value="25">Within 25 miles</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Main Tabs Navigation -->
            <div class="flex space-x-1 mb-8 bg-white/10 rounded-xl p-1 relative">
                <div class="tab-indicator absolute bg-white/20 rounded-lg transition-all duration-300 ease-in-out"
                     :style="`width: ${100/4}%; transform: translateX(${['recommendations', 'analysis', 'preferences', 'insights'].indexOf(activeTab) * 100}%)`"></div>
                
                <button @click="switchTab('recommendations')"
                        :class="activeTab === 'recommendations' ? 'text-white' : 'text-white/60'"
                        class="relative z-10 flex-1 py-3 px-6 text-center font-medium rounded-lg transition-all duration-200">
                    <i class="fas fa-star mr-2"></i>Recommendations
                </button>
                <button @click="switchTab('analysis')"
                        :class="activeTab === 'analysis' ? 'text-white' : 'text-white/60'"
                        class="relative z-10 flex-1 py-3 px-6 text-center font-medium rounded-lg transition-all duration-200">
                    <i class="fas fa-camera mr-2"></i>Food Analysis
                </button>
                <button @click="switchTab('preferences')"
                        :class="activeTab === 'preferences' ? 'text-white' : 'text-white/60'"
                        class="relative z-10 flex-1 py-3 px-6 text-center font-medium rounded-lg transition-all duration-200">
                    <i class="fas fa-heart mr-2"></i>Preferences
                </button>
                <button @click="switchTab('insights')"
                        :class="activeTab === 'insights' ? 'text-white' : 'text-white/60'"
                        class="relative z-10 flex-1 py-3 px-6 text-center font-medium rounded-lg transition-all duration-200">
                    <i class="fas fa-chart-line mr-2"></i>Insights
                </button>
            </div>

            <!-- Tab Content -->
            <div class="min-h-96">
                <!-- Recommendations Tab -->
                <div x-show="activeTab === 'recommendations'" 
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 transform scale-95"
                     x-transition:enter-end="opacity-100 transform scale-100">
                    
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-white">Personalized Recommendations</h2>
                        <button @click="getRecommendations()" 
                                :disabled="loading || !userId"
                                class="btn-primary text-white px-6 py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2">
                            <i :class="loading ? 'fas fa-spinner animate-spin' : 'fas fa-search'" class="text-sm"></i>
                            <span x-text="loading ? 'Discovering...' : 'Discover Food'"></span>
                        </button>
                    </div>

                    <!-- Restaurant Cards Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" x-show="recommendations.length > 0">
                        <template x-for="restaurant in recommendations" :key="restaurant.id">
                            <div class="glass-card rounded-xl overflow-hidden restaurant-card">
                                <div class="relative h-48 bg-gradient-to-br from-purple-500 to-pink-500">
                                    <img :src="restaurant.image" :alt="restaurant.name" 
                                         class="w-full h-full object-cover"
                                         onerror="this.src='https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&h=300&fit=crop'">
                                    <div class="absolute top-3 right-3">
                                        <span class="bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full text-xs font-bold flex items-center">
                                            <i class="fas fa-star text-yellow-500 mr-1"></i>
                                            <span x-text="restaurant.rating"></span>
                                        </span>
                                    </div>
                                    <div class="absolute bottom-3 left-3">
                                        <span class="bg-black/50 backdrop-blur-sm text-white px-2 py-1 rounded-lg text-xs font-medium"
                                              x-text="restaurant.cuisine"></span>
                                    </div>
                                </div>
                                <div class="p-6">
                                    <h3 class="text-lg font-bold text-white mb-2" x-text="restaurant.name"></h3>
                                    <p class="text-white/70 text-sm mb-3" x-text="restaurant.description"></p>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-2 text-white/60 text-sm">
                                            <i class="fas fa-map-marker-alt"></i>
                                            <span x-text="restaurant.distance"></span>
                                        </div>
                                        <div class="flex items-center space-x-2 text-white/60 text-sm">
                                            <i class="fas fa-clock"></i>
                                            <span x-text="restaurant.time"></span>
                                        </div>
                                    </div>
                                    <div class="mt-4 flex space-x-2">
                                        <button class="flex-1 bg-white/10 hover:bg-white/20 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                            <i class="fas fa-phone mr-2"></i>Call
                                        </button>
                                        <button class="flex-1 bg-white/10 hover:bg-white/20 text-white py-2 rounded-lg text-sm font-medium transition-colors">
                                            <i class="fas fa-directions mr-2"></i>Directions
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>

                    <!-- Empty State -->
                    <div x-show="!loading && recommendations.length === 0" class="text-center py-12">
                        <div class="w-24 h-24 mx-auto mb-6 bg-white/10 rounded-full flex items-center justify-center">
                            <i class="fas fa-search text-white/50 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">No Recommendations Yet</h3>
                        <p class="text-white/60 mb-6">Enter your User ID and click "Discover Food" to get personalized recommendations.</p>
                    </div>
                </div>

                <!-- Food Analysis Tab -->
                <div x-show="activeTab === 'analysis'" 
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 transform scale-95"
                     x-transition:enter-end="opacity-100 transform scale-100">
                    
                    <h2 class="text-2xl font-bold text-white mb-6">AI Food Analysis</h2>
                    
                    <!-- Upload Area -->
                    <div class="glass-card rounded-xl p-8 mb-6 text-center">
                        <div class="border-2 border-dashed border-white/30 rounded-xl p-8 hover:border-white/50 transition-colors"
                             @dragover.prevent 
                             @drop.prevent="handleFileDrop($event)">
                            <div x-show="!previewUrl" class="space-y-4">
                                <div class="w-16 h-16 mx-auto bg-white/10 rounded-full flex items-center justify-center">
                                    <i class="fas fa-camera text-white/70 text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-bold text-white mb-2">Upload Food Image</h3>
                                    <p class="text-white/70 mb-4">Drag and drop an image or click to browse</p>
                                    <input type="file" 
                                           accept="image/*" 
                                           @change="onFileSelect($event)" 
                                           class="hidden" 
                                           id="imageUpload">
                                    <label for="imageUpload" 
                                           class="inline-block bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-lg cursor-pointer transition-colors">
                                        <i class="fas fa-upload mr-2"></i>Choose Image
                                    </label>
                                </div>
                            </div>
                            
                            <div x-show="previewUrl" class="space-y-4">
                                <img :src="previewUrl" alt="Preview" class="max-w-full h-64 mx-auto rounded-lg object-cover">
                                <div class="flex justify-center space-x-3">
                                    <button @click="analyzeImage()" 
                                            :disabled="loading"
                                            class="btn-primary text-white px-6 py-3 rounded-lg font-medium disabled:opacity-50 flex items-center space-x-2">
                                        <i :class="loading ? 'fas fa-spinner animate-spin' : 'fas fa-magic'" class="text-sm"></i>
                                        <span x-text="loading ? 'Analyzing...' : 'Analyze Food'"></span>
                                    </button>
                                    <button @click="clearImage()" 
                                            class="bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                        <i class="fas fa-trash mr-2"></i>Clear
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis Results -->
                    <div x-show="analysisResult" class="space-y-6">
                        <div class="glass-card rounded-xl p-6">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                                <i class="fas fa-eye text-blue-400 mr-2"></i>
                                Detected Foods
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <template x-for="food in analysisResult?.detected_foods || []" :key="food.food_item">
                                    <div class="bg-white/5 rounded-lg p-4">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-bold text-white capitalize" x-text="food.food_item"></h4>
                                            <span class="text-xs bg-green-500/20 text-green-300 px-2 py-1 rounded-full"
                                                  x-text="Math.round(food.confidence * 100) + '%'"></span>
                                        </div>
                                        <p class="text-white/70 text-sm capitalize" x-text="food.category"></p>
                                        <div x-show="food.nutritional_info" class="mt-2 text-xs text-white/60">
                                            <span x-text="food.nutritional_info?.calories + ' cal'"></span> •
                                            <span x-text="food.nutritional_info?.protein + 'g protein'"></span>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <div class="glass-card rounded-xl p-6" x-show="analysisResult?.recommendations">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                                <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>
                                AI Recommendations
                            </h3>
                            <div class="space-y-2">
                                <template x-for="recommendation in analysisResult?.recommendations || []">
                                    <div class="flex items-start space-x-3 p-3 bg-white/5 rounded-lg">
                                        <i class="fas fa-check-circle text-green-400 mt-0.5"></i>
                                        <p class="text-white/80" x-text="recommendation"></p>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Gemini AI Enhanced Analysis -->
                        <div class="glass-card rounded-xl p-6" x-show="analysisResult?.gemini_analysis">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                                <i class="fas fa-brain text-purple-400 mr-2"></i>
                                Gemini AI Enhanced Analysis
                                <span class="ml-2 text-xs bg-purple-500/20 text-purple-300 px-2 py-1 rounded-full">Premium</span>
                            </h3>
                            <div class="space-y-4">
                                <div x-show="analysisResult?.gemini_analysis?.analysis">
                                    <h4 class="font-semibold text-white/90 mb-2">Detailed Analysis:</h4>
                                    <p class="text-white/70 text-sm leading-relaxed" x-text="analysisResult?.gemini_analysis?.analysis"></p>
                                </div>
                                <div x-show="analysisResult?.user_benefits">
                                    <h4 class="font-semibold text-white/90 mb-2">How This Helps You:</h4>
                                    <div class="space-y-2">
                                        <template x-for="benefit in analysisResult?.user_benefits || []">
                                            <div class="flex items-start space-x-2">
                                                <i class="fas fa-star text-amber-400 mt-1 text-xs"></i>
                                                <span class="text-white/70 text-sm" x-text="benefit"></span>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Taste AI Insights Button -->
                        <div class="glass-card rounded-xl p-6">
                            <button @click="getTasteAIInsights()" 
                                    :disabled="loading || !userId.trim()"
                                    class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105">
                                <i class="fas fa-magic mr-2"></i>
                                <span x-text="loading ? 'Analyzing Your Taste Profile...' : 'Get Personal Taste AI Insights'"></span>
                            </button>
                            <p class="text-white/60 text-xs mt-2 text-center">Get personalized insights about your food preferences and recommendations</p>
                        </div>

                        <!-- Taste AI Insights Results -->
                        <div x-show="tasteInsights" class="glass-card rounded-xl p-6">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                                <i class="fas fa-user-circle text-cyan-400 mr-2"></i>
                                Your Personal Taste Profile
                            </h3>
                            <div class="space-y-4" x-show="tasteInsights">
                                <div x-show="tasteInsights?.advanced_insights?.personality_type">
                                    <h4 class="font-semibold text-white/90 mb-2">Food Personality:</h4>
                                    <p class="text-white/70" x-text="tasteInsights?.advanced_insights?.personality_type"></p>
                                </div>
                                <div x-show="tasteInsights?.advanced_insights?.flavor_profile">
                                    <h4 class="font-semibold text-white/90 mb-2">Your Flavor Profile:</h4>
                                    <p class="text-white/70" x-text="tasteInsights?.advanced_insights?.flavor_profile"></p>
                                </div>
                                <div x-show="tasteInsights?.personalization_score">
                                    <h4 class="font-semibold text-white/90 mb-2">Personalization Score:</h4>
                                    <div class="flex items-center space-x-2">
                                        <div class="flex-1 bg-white/10 rounded-full h-2">
                                            <div class="h-2 bg-gradient-to-r from-green-400 to-blue-500 rounded-full transition-all duration-1000"
                                                 :style="`width: ${tasteInsights?.personalization_score || 0}%`"></div>
                                        </div>
                                        <span class="text-white/80 font-bold" x-text="(tasteInsights?.personalization_score || 0) + '%'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Preferences Tab -->
                <div x-show="activeTab === 'preferences'" 
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 transform scale-95"
                     x-transition:enter-end="opacity-100 transform scale-100">
                    
                    <h2 class="text-2xl font-bold text-white mb-6">Taste Preferences</h2>
                    
                    <div class="space-y-6">
                        <!-- Dietary Restrictions -->
                        <div class="glass-card rounded-xl p-6">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                                <i class="fas fa-shield-alt text-red-400 mr-2"></i>
                                Dietary Restrictions
                            </h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <template x-for="restriction in ['vegetarian', 'vegan', 'gluten-free', 'dairy-free', 'nut-free', 'keto', 'paleo', 'low-carb']">
                                    <button @click="togglePreference('dietary_restrictions', restriction)"
                                            :class="preferences.dietary_restrictions.includes(restriction) ? 'bg-red-500/20 border-red-400 text-red-300' : 'bg-white/5 border-white/20 text-white/70'"
                                            class="p-3 rounded-lg border text-sm font-medium transition-all hover:scale-105">
                                        <span x-text="restriction.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())"></span>
                                    </button>
                                </template>
                            </div>
                        </div>

                        <!-- Cuisine Preferences -->
                        <div class="glass-card rounded-xl p-6">
                            <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                                <i class="fas fa-globe text-blue-400 mr-2"></i>
                                Favorite Cuisines
                            </h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <template x-for="cuisine in ['italian', 'chinese', 'mexican', 'indian', 'japanese', 'thai', 'french', 'mediterranean']">
                                    <button @click="togglePreference('cuisine_preferences', cuisine)"
                                            :class="preferences.cuisine_preferences.includes(cuisine) ? 'bg-blue-500/20 border-blue-400 text-blue-300' : 'bg-white/5 border-white/20 text-white/70'"
                                            class="p-3 rounded-lg border text-sm font-medium transition-all hover:scale-105">
                                        <span x-text="cuisine.charAt(0).toUpperCase() + cuisine.slice(1)"></span>
                                    </button>
                                </template>
                            </div>
                        </div>

                        <!-- Save Button -->
                        <button @click="savePreferences()" 
                                :disabled="!userId || loading"
                                class="w-full btn-primary text-white py-4 rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed">
                            <i :class="loading ? 'fas fa-spinner animate-spin' : 'fas fa-save'" class="mr-2"></i>
                            <span x-text="loading ? 'Saving...' : 'Save Preferences'"></span>
                        </button>
                    </div>
                </div>

                <!-- Insights Tab -->
                <div x-show="activeTab === 'insights'" 
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 transform scale-95"
                     x-transition:enter-end="opacity-100 transform scale-100">
                    
                    <h2 class="text-2xl font-bold text-white mb-6">Food Insights & Analytics</h2>
                    
                    <!-- Stats Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="glass-card rounded-xl p-6 text-center">
                            <div class="w-12 h-12 mx-auto mb-4 bg-blue-500/20 rounded-full flex items-center justify-center">
                                <i class="fas fa-utensils text-blue-400 text-xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-1" x-text="stats.totalRecommendations"></h3>
                            <p class="text-white/70">Total Recommendations</p>
                        </div>
                        <div class="glass-card rounded-xl p-6 text-center">
                            <div class="w-12 h-12 mx-auto mb-4 bg-green-500/20 rounded-full flex items-center justify-center">
                                <i class="fas fa-star text-green-400 text-xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-1">
                                <span x-text="stats.avgRating"></span>
                                <span x-show="insightsLoading" class="ml-2 text-sm">
                                    <i class="fas fa-sync fa-spin text-cyan-400"></i>
                                </span>
                            </h3>
                            <p class="text-white/70">Average Rating 
                                <span x-show="stats.totalRatings > 0" class="text-xs">
                                    (<span x-text="stats.totalRatings"></span> ratings)
                                </span>
                            </p>
                        </div>
                        <div class="glass-card rounded-xl p-6 text-center">
                            <div class="w-12 h-12 mx-auto mb-4 bg-purple-500/20 rounded-full flex items-center justify-center">
                                <i class="fas fa-images text-purple-400 text-xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-1">
                                <span x-text="stats.imagesAnalyzed"></span>
                                <span x-show="insightsLoading" class="ml-2 text-sm">
                                    <i class="fas fa-sync fa-spin text-purple-400"></i>
                                </span>
                            </h3>
                            <p class="text-white/70">Images Analyzed</p>
                        </div>
                        <div class="glass-card rounded-xl p-6 text-center">
                            <div class="w-12 h-12 mx-auto mb-4 bg-amber-500/20 rounded-full flex items-center justify-center">
                                <i class="fas fa-bullseye text-amber-400 text-xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-1">
                                <span x-text="stats.accuracyPercentage"></span>%
                            </h3>
                            <p class="text-white/70">AI Accuracy</p>
                        </div>
                    </div>

                    <!-- Trending Section -->
                    <div class="glass-card rounded-xl p-6">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-fire text-orange-400 mr-2"></i>
                            Trending Now
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <template x-for="trend in trendingData" :key="trend.name">
                                <div class="flex items-center space-x-4 p-4 bg-white/5 rounded-lg">
                                    <div class="w-12 h-12 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center">
                                        <span class="text-white font-bold" x-text="trend.rank"></span>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-bold text-white" x-text="trend.name"></h4>
                                        <p class="text-white/70 text-sm" x-text="trend.description"></p>
                                    </div>
                                    <div class="text-green-400 font-bold" x-text="'+' + trend.growth + '%'"></div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notifications" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        function tasteTrailApp() {
            return {
                // Core State
                initialLoading: true,
                activeTab: 'recommendations',
                loading: false,
                userId: '',
                
                // Location State
                selectedLocation: {},
                locationSearch: '',
                locations: [
                    { id: 1, name: 'New York, NY', country: 'United States', lat: 40.7128, lng: -74.0060 },
                    { id: 2, name: 'Los Angeles, CA', country: 'United States', lat: 34.0522, lng: -118.2437 },
                    { id: 3, name: 'London', country: 'United Kingdom', lat: 51.5074, lng: -0.1278 },
                    { id: 4, name: 'Paris', country: 'France', lat: 48.8566, lng: 2.3522 },
                    { id: 5, name: 'Tokyo', country: 'Japan', lat: 35.6762, lng: 139.6503 },
                    { id: 6, name: 'Mumbai', country: 'India', lat: 19.0760, lng: 72.8777 },
                    { id: 7, name: 'San Francisco, CA', country: 'United States', lat: 37.7749, lng: -122.4194 },
                    { id: 8, name: 'Sydney', country: 'Australia', lat: -33.8688, lng: 151.2093 },
                ],
                filteredLocations: [],
                
                // Filters
                filters: {
                    mealType: '',
                    budget: '',
                    cuisine: '',
                    distance: ''
                },
                
                // Data
                recommendations: [],
                analysisResult: null,
                tasteInsights: null,
                preferences: {
                    dietary_restrictions: [],
                    cuisine_preferences: []
                },
                
                // Image Analysis
                selectedFile: null,
                previewUrl: null,
                
                // Stats & Analytics - Real-time from API
                stats: {
                    totalRecommendations: 0,
                    avgRating: 0.0,
                    imagesAnalyzed: 0,
                    accuracyPercentage: 0.0,
                    totalRatings: 0
                },
                
                // Real-time insights data
                userInsights: null,
                insightsLoading: false,
                
                trendingData: [
                    { rank: 1, name: 'Korean BBQ', description: 'Authentic Korean flavors', growth: 23 },
                    { rank: 2, name: 'Plant-Based Burgers', description: 'Sustainable dining', growth: 18 },
                    { rank: 3, name: 'Artisan Pizza', description: 'Craft Italian cuisine', growth: 15 },
                    { rank: 4, name: 'Fusion Tacos', description: 'Creative Mexican fusion', growth: 12 }
                ],

                // Initialize
                async init() {
                    this.filteredLocations = this.locations;
                    
                    // Load real-time insights immediately
                    await this.loadRealTimeInsights();
                    
                    // Simulate app loading with expanding X transition
                    setTimeout(() => {
                        // Start the expanding X transition
                        this.startExpandingXTransition();
                    }, 2000);

                    // Load user data from localStorage
                    this.loadUserData();
                    
                    // Set up periodic insights refresh
                    setInterval(() => {
                        this.loadRealTimeInsights();
                    }, 30000); // Refresh every 30 seconds
                },

                startExpandingXTransition() {
                    const loadingScreen = document.getElementById('loadingScreen');
                    const loadingX = document.getElementById('loadingX');
                    
                    if (loadingScreen && loadingX) {
                        // Add smooth transition classes
                        loadingScreen.classList.add('smooth-exit');
                        loadingX.classList.add('logo-zoom-out');
                        
                        // After 1.5 seconds, hide loading and show main app
                        setTimeout(() => {
                            this.initialLoading = false;
                            // Show navigation X after transition
                            setTimeout(() => {
                                const navX = document.getElementById('navX');
                                if (navX) {
                                    navX.style.opacity = '1';
                                    navX.classList.add('superhero-entry');
                                }
                            }, 300);
                        }, 1500);
                    }
                },
                
                // Load real-time insights from API
                async loadRealTimeInsights() {
                    try {
                        this.insightsLoading = true;
                        
                        const response = await fetch('http://localhost:8000/insights/user-stats');
                        if (response.ok) {
                            this.userInsights = await response.json();
                            
                            // Update stats with real data
                            const userStats = this.userInsights.user_stats;
                            this.stats.imagesAnalyzed = userStats.total_images_analyzed || 0;
                            this.stats.avgRating = userStats.average_rating || 0.0;
                            this.stats.totalRatings = userStats.total_ratings_given || 0;
                            this.stats.accuracyPercentage = userStats.accuracy_feedback?.accuracy_percentage || 0.0;
                            
                            console.log('✅ Real-time insights loaded:', this.userInsights);
                        } else {
                            console.warn('Failed to load insights, using defaults');
                        }
                    } catch (error) {
                        console.warn('Error loading real-time insights:', error);
                    } finally {
                        this.insightsLoading = false;
                    }
                },
                
                // Track image analysis with API
                async trackImageAnalysis(detectedFoods = [], confidenceScores = [], mealType = 'unknown', calories = 0) {
                    try {
                        const response = await fetch('http://localhost:8000/insights/track-image-analysis', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                detected_foods: detectedFoods,
                                confidence_scores: confidenceScores,
                                meal_type: mealType,
                                calories_estimated: calories
                            })
                        });
                        
                        if (response.ok) {
                            const result = await response.json();
                            console.log('📊 Image analysis tracked:', result);
                            
                            // Refresh insights to show updated count
                            await this.loadRealTimeInsights();
                        }
                    } catch (error) {
                        console.warn('Error tracking image analysis:', error);
                    }
                },
                
                // Track rating with API
                async trackRating(rating, foodItem = '', cuisineType = '') {
                    try {
                        const response = await fetch('http://localhost:8000/insights/track-rating', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                rating: rating,
                                food_item: foodItem,
                                cuisine_type: cuisineType
                            })
                        });
                        
                        if (response.ok) {
                            const result = await response.json();
                            console.log('⭐ Rating tracked:', result);
                            
                            // Refresh insights to show updated rating
                            await this.loadRealTimeInsights();
                        }
                    } catch (error) {
                        console.warn('Error tracking rating:', error);
                    }
                },

                // Location Management
                searchLocations() {
                    if (!this.locationSearch) {
                        this.filteredLocations = this.locations;
                        return;
                    }
                    
                    const search = this.locationSearch.toLowerCase();
                    this.filteredLocations = this.locations.filter(location => 
                        location.name.toLowerCase().includes(search) ||
                        location.country.toLowerCase().includes(search)
                    );
                },

                selectLocation(location) {
                    this.selectedLocation = location;
                    this.locationSearch = '';
                    this.filteredLocations = this.locations;
                    this.showNotification(`Location set to ${location.name}`, 'success');
                },

                // Tab Management
                switchTab(tab) {
                    this.activeTab = tab;
                },

                // Recommendations
                async getRecommendations() {
                    if (!this.userId.trim()) {
                        this.showNotification('Please enter a User ID first!', 'warning');
                        return;
                    }

                    this.loading = true;
                    
                    try {
                        // Prepare request data with all user preferences and location
                        const requestData = {
                            user_id: this.userId,
                            location: this.selectedLocation.display_name || this.selectedLocation.name || null,
                            meal_type: this.filters.mealType || null,
                            budget_range: this.filters.budget || null,
                            cuisine_preferences: this.preferences.cuisine_preferences || [],
                            dietary_restrictions: this.preferences.dietary_restrictions || []
                        };

                        console.log('Sending recommendation request:', requestData);

                        // Call the enhanced recommendations API
                        const response = await fetch('http://localhost:8000/recommendations-enhanced', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(requestData)
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();
                        this.recommendations = result.restaurants || [];
                        
                        // Show enhanced notification with AI insights
                        if (result.ai_enhanced) {
                            this.showNotification(`Found ${this.recommendations.length} AI-powered recommendations with taste insights!`, 'success');
                        } else {
                            this.showNotification(`Found ${this.recommendations.length} great recommendations!`, 'success');
                        }

                        // Store successful request for learning
                        this.storeRecommendationHistory(requestData, result);
                        
                    } catch (error) {
                        console.error('Recommendation error:', error);
                        this.showNotification('Error fetching recommendations. Please try again!', 'error');
                        
                        // Fallback to realistic mock data if API fails
                        this.recommendations = this.generateRealisticRestaurants();
                        this.showNotification('Using offline recommendations. Check your connection for AI-powered results!', 'warning');
                    } finally {
                        this.loading = false;
                    }
                },

                storeRecommendationHistory(request, result) {
                    // Store recommendation history for better AI learning
                    const history = JSON.parse(localStorage.getItem('recommendationHistory') || '[]');
                    history.push({
                        timestamp: new Date().toISOString(),
                        request: request,
                        result_count: result.restaurants?.length || 0,
                        ai_enhanced: result.ai_enhanced || false
                    });
                    
                    // Keep only last 50 requests
                    if (history.length > 50) {
                        history.splice(0, history.length - 50);
                    }
                    
                    localStorage.setItem('recommendationHistory', JSON.stringify(history));
                },

                generateRealisticRestaurants() {
                    const restaurants = [
                        {
                            id: 1,
                            name: "Bella Vista Ristorante",
                            cuisine: "Italian",
                            rating: 4.6,
                            description: "Authentic Italian cuisine with handmade pasta and wood-fired pizzas",
                            distance: "0.8 mi",
                            time: "25-35 min",
                            image: "https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop"
                        },
                        {
                            id: 2,
                            name: "Dragon Palace",
                            cuisine: "Chinese",
                            rating: 4.4,
                            description: "Traditional Chinese dishes with modern presentation and fresh ingredients",
                            distance: "1.2 mi",
                            time: "20-30 min",
                            image: "https://images.unsplash.com/photo-1563379091339-03246963d61a?w=400&h=300&fit=crop"
                        },
                        {
                            id: 3,
                            name: "The Green Garden",
                            cuisine: "Healthy",
                            rating: 4.7,
                            description: "Farm-to-table dining with organic ingredients and creative vegetarian options",
                            distance: "0.5 mi",
                            time: "15-25 min",
                            image: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop"
                        },
                        {
                            id: 4,
                            name: "Sakura Sushi Bar",
                            cuisine: "Japanese",
                            rating: 4.8,
                            description: "Fresh sushi and sashimi prepared by master chefs with premium ingredients",
                            distance: "2.1 mi",
                            time: "30-40 min",
                            image: "https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?w=400&h=300&fit=crop"
                        },
                        {
                            id: 5,
                            name: "Spice Route",
                            cuisine: "Indian",
                            rating: 4.5,
                            description: "Authentic Indian spices and flavors in a modern, elegant setting",
                            distance: "1.7 mi",
                            time: "25-35 min",
                            image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=400&h=300&fit=crop"
                        },
                        {
                            id: 6,
                            name: "Taco Libre",
                            cuisine: "Mexican",
                            rating: 4.3,
                            description: "Creative Mexican fusion with fresh ingredients and bold flavors",
                            distance: "0.9 mi",
                            time: "20-30 min",
                            image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop"
                        }
                    ];

                    // Filter based on user preferences and location
                    return restaurants.slice(0, Math.floor(Math.random() * 3) + 3);
                },

                // Image Analysis
                onFileSelect(event) {
                    const file = event.target.files[0];
                    if (file) {
                        this.selectedFile = file;
                        this.previewUrl = URL.createObjectURL(file);
                    }
                },

                handleFileDrop(event) {
                    const files = event.dataTransfer.files;
                    if (files.length > 0) {
                        this.selectedFile = files[0];
                        this.previewUrl = URL.createObjectURL(files[0]);
                    }
                },

                clearImage() {
                    this.selectedFile = null;
                    this.previewUrl = null;
                    this.analysisResult = null;
                    document.getElementById('imageUpload').value = '';
                },

                async analyzeImage() {
                    if (!this.selectedFile) {
                        this.showNotification('Please select an image first!', 'warning');
                        return;
                    }

                    this.loading = true;
                    
                    try {
                        const formData = new FormData();
                        formData.append('file', this.selectedFile);

                        const response = await fetch('http://localhost:8000/analyze-image', {
                            method: 'POST',
                            body: formData
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        this.analysisResult = await response.json();
                        this.showNotification('Image analysis completed successfully!', 'success');
                        
                        // Track image analysis for real-time insights
                        if (this.analysisResult?.detected_foods) {
                            const detectedFoods = this.analysisResult.detected_foods.map(food => food.name || food);
                            const confidenceScores = this.analysisResult.detected_foods.map(food => food.confidence || 0.8);
                            const calories = this.analysisResult.nutritional_info?.calories || 0;
                            
                            // Determine meal type based on time
                            const hour = new Date().getHours();
                            let mealType = 'snack';
                            if (hour >= 5 && hour < 11) mealType = 'breakfast';
                            else if (hour >= 11 && hour < 16) mealType = 'lunch';
                            else if (hour >= 16 && hour < 21) mealType = 'dinner';
                            
                            await this.trackImageAnalysis(detectedFoods, confidenceScores, mealType, parseInt(calories));
                        }
                        
                    } catch (error) {
                        console.error('Error analyzing image:', error);
                        this.showNotification('Error analyzing image. Please try again!', 'error');
                    } finally {
                        this.loading = false;
                    }
                },

                // Taste AI Insights
                async getTasteAIInsights() {
                    if (!this.userId.trim()) {
                        this.showNotification('Please enter a User ID first!', 'warning');
                        return;
                    }

                    this.loading = true;
                    
                    try {
                        const response = await fetch(`http://localhost:8000/taste-ai/insights/${this.userId}`);

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        this.tasteInsights = await response.json();
                        
                        if (this.tasteInsights.ai_powered) {
                            this.showNotification('AI taste insights generated with Gemini analysis!', 'success');
                        } else {
                            this.showNotification('Basic taste insights generated successfully!', 'success');
                        }
                        
                    } catch (error) {
                        console.error('Error getting taste insights:', error);
                        this.showNotification('Error getting taste insights. Please try again!', 'error');
                    } finally {
                        this.loading = false;
                    }
                },

                // Preferences
                togglePreference(category, value) {
                    const prefs = this.preferences[category];
                    const index = prefs.indexOf(value);
                    
                    if (index > -1) {
                        prefs.splice(index, 1);
                    } else {
                        prefs.push(value);
                    }
                },

                async savePreferences() {
                    if (!this.userId.trim()) {
                        this.showNotification('Please enter a User ID first!', 'warning');
                        return;
                    }

                    this.loading = true;
                    
                    try {
                        const response = await fetch(`http://localhost:8000/preferences/${this.userId}`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(this.preferences)
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        this.showNotification('Preferences saved successfully!', 'success');
                        this.saveUserData();
                        
                    } catch (error) {
                        console.error('Error saving preferences:', error);
                        this.showNotification('Error saving preferences. Please try again!', 'error');
                    } finally {
                        this.loading = false;
                    }
                },

                // Local Storage
                saveUserData() {
                    const userData = {
                        userId: this.userId,
                        selectedLocation: this.selectedLocation,
                        preferences: this.preferences,
                        filters: this.filters
                    };
                    localStorage.setItem('tasteTrailUserData', JSON.stringify(userData));
                },

                loadUserData() {
                    const userData = localStorage.getItem('tasteTrailUserData');
                    if (userData) {
                        const data = JSON.parse(userData);
                        this.userId = data.userId || '';
                        this.selectedLocation = data.selectedLocation || {};
                        this.preferences = data.preferences || { dietary_restrictions: [], cuisine_preferences: [] };
                        this.filters = data.filters || { mealType: '', budget: '', cuisine: '', distance: '' };
                    }
                },

                // Notifications
                showNotification(message, type = 'info') {
                    const notification = document.createElement('div');
                    const icons = {
                        success: 'fas fa-check-circle text-green-400',
                        error: 'fas fa-exclamation-circle text-red-400',
                        warning: 'fas fa-exclamation-triangle text-yellow-400',
                        info: 'fas fa-info-circle text-blue-400'
                    };
                    
                    const colors = {
                        success: 'from-green-500/20 to-green-600/20 border-green-400/30',
                        error: 'from-red-500/20 to-red-600/20 border-red-400/30',
                        warning: 'from-yellow-500/20 to-yellow-600/20 border-yellow-400/30',
                        info: 'from-blue-500/20 to-blue-600/20 border-blue-400/30'
                    };
                    
                    notification.className = `bg-gradient-to-r ${colors[type]} backdrop-blur-lg border text-white px-6 py-4 rounded-xl shadow-lg animate-slideInRight flex items-center space-x-3 max-w-md`;
                    notification.innerHTML = `
                        <i class="${icons[type]} text-lg"></i>
                        <span class="font-medium flex-1">${message}</span>
                        <button onclick="this.parentElement.remove()" class="text-white/60 hover:text-white">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    
                    document.getElementById('notifications').appendChild(notification);
                    
                    setTimeout(() => {
                        notification.style.transform = 'translateX(100%)';
                        setTimeout(() => notification.remove(), 300);
                    }, 5000);
                }
            }
        }
    </script>

    <!-- Superhero Brand Initialization -->
    <script>
        // Superhero Brand Object
        const superheroBrand = {
            init() {
                console.log('🦸‍♂️ Superhero Brand Initialized');
                this.addSuperheroEffects();
            },
            
            createSuperheroParticles() {
                // Create floating particles effect
                const particleContainer = document.createElement('div');
                particleContainer.className = 'superhero-particles fixed inset-0 pointer-events-none z-0';
                document.body.appendChild(particleContainer);
                
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'absolute w-2 h-2 bg-cyan-400 rounded-full opacity-20 animate-pulse';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    particleContainer.appendChild(particle);
                }
            },
            
            addSuperheroEffects() {
                // Add glow effects to X elements
                const xElements = document.querySelectorAll('.animate-x-glow');
                xElements.forEach(el => {
                    el.style.textShadow = '0 0 20px #00d4ff, 0 0 40px #ff00ff';
                });
            }
        };

        // Taste Trail Utils Object
        const TasteTrailUtils = {
            showSuperheroToast(message, type = 'info') {
                const toast = document.createElement('div');
                const colors = {
                    success: 'from-green-500/20 to-green-600/20 border-green-400/30',
                    error: 'from-red-500/20 to-red-600/20 border-red-400/30',
                    warning: 'from-yellow-500/20 to-yellow-600/20 border-yellow-400/30',
                    info: 'from-blue-500/20 to-blue-600/20 border-blue-400/30'
                };
                
                toast.className = `fixed top-4 right-4 z-50 bg-gradient-to-r ${colors[type]} backdrop-blur-lg border text-white px-6 py-4 rounded-xl shadow-lg animate-bounce flex items-center space-x-3 max-w-md`;
                toast.innerHTML = `
                    <i class="fas fa-bolt text-cyan-400"></i>
                    <span class="font-medium">${message}</span>
                `;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.transform = 'translateX(100%)';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
        };

        // Initialize superhero brand effects
        document.addEventListener('DOMContentLoaded', () => {
            superheroBrand.init();
            superheroBrand.createSuperheroParticles();
            
            // Show superhero welcome message
            setTimeout(() => {
                TasteTrailUtils.showSuperheroToast('neXtaste is ready to blow your mind! 🚀', 'success');
            }, 5000);
        });

        // Add keyboard shortcuts for superhero effects
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && e.key === 'X') {
                // Trigger special X effect
                const xElements = document.querySelectorAll('.brand-x, .animate-x-glow');
                xElements.forEach(x => {
                    x.style.animation = 'superhero-entry 1s cubic-bezier(0.68, -0.55, 0.265, 1.55), x-glow 0.2s ease-in-out infinite alternate, x-flicker 0.05s ease-in-out infinite';
                    setTimeout(() => {
                        x.style.animation = 'x-glow 1.5s ease-in-out infinite alternate';
                    }, 2000);
                });
                TasteTrailUtils.showSuperheroToast('Superhero X activated! ⚡', 'info');
            }
        });

        // Add touch gestures for mobile superhero effects
        let touchStartX = 0;
        let touchStartY = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        });

        document.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;

            // Diagonal swipe for superhero effect
            if (Math.abs(deltaX) > 100 && Math.abs(deltaY) > 100) {
                const xElements = document.querySelectorAll('.animate-x-glow');
                xElements.forEach(x => {
                    x.style.transform = 'scale(1.3) rotateZ(15deg)';
                    x.style.textShadow = '0 0 30px #00d4ff, 0 0 60px #ff00ff, 0 0 90px #ffff00';
                    setTimeout(() => {
                        x.style.transform = '';
                        x.style.textShadow = '';
                    }, 1000);
                });
            }
        });

        // Healthy Carousel Component
        function healthyCarousel() {
            return {
                currentSlide: 0,
                autoAdvanceInterval: null,
                
                init() {
                    this.generateTimeBasedFoods();
                    this.startAutoAdvance();
                },
                
                healthyFoods: [],
                
                generateTimeBasedFoods() {
                    const currentHour = new Date().getHours();
                    let mealType, foods;
                    
                    if (currentHour >= 5 && currentHour < 11) {
                        mealType = 'breakfast';
                        foods = this.getBreakfastFoods();
                    } else if (currentHour >= 11 && currentHour < 16) {
                        mealType = 'lunch';
                        foods = this.getLunchFoods();
                    } else if (currentHour >= 16 && currentHour < 21) {
                        mealType = 'dinner';
                        foods = this.getDinnerFoods();
                    } else {
                        mealType = 'snack';
                        foods = this.getSnackFoods();
                    }
                    
                    // Split foods into groups of 3 for carousel slides
                    this.healthyFoods = this.chunkArray(foods, 3);
                },
                
                getBreakfastFoods() {
                    return [
                        {
                            id: 1, name: "Overnight Oats Bowl", mealType: "breakfast",
                            description: "Protein-rich oats with berries, chia seeds, and almond milk",
                            calories: 320, protein: 12, carbs: 45, fat: 8,
                            benefits: ["High Fiber", "Antioxidants", "Sustained Energy"],
                            image: "https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=400&h=300&fit=crop"
                        },
                        {
                            id: 2, name: "Avocado Toast Supreme", mealType: "breakfast",
                            description: "Whole grain toast with smashed avocado, poached egg, and microgreens",
                            calories: 280, protein: 14, carbs: 22, fat: 16,
                            benefits: ["Healthy Fats", "Complete Protein", "B Vitamins"],
                            image: "https://images.unsplash.com/photo-1525351484163-7529414344d8?w=400&h=300&fit=crop"
                        },
                        {
                            id: 3, name: "Green Smoothie Power", mealType: "breakfast",
                            description: "Spinach, banana, mango, protein powder, and coconut water blend",
                            calories: 240, protein: 20, carbs: 35, fat: 3,
                            benefits: ["Vitamin C", "Iron Rich", "Post-Workout"],
                            image: "https://images.unsplash.com/photo-1610970881699-44a5587cabec?w=400&h=300&fit=crop"
                        },
                        {
                            id: 4, name: "Greek Yogurt Parfait", mealType: "breakfast",
                            description: "Thick Greek yogurt layered with granola, honey, and fresh berries",
                            calories: 290, protein: 18, carbs: 32, fat: 9,
                            benefits: ["Probiotics", "Calcium", "Low Sugar"],
                            image: "https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400&h=300&fit=crop"
                        },
                        {
                            id: 5, name: "Protein Pancakes", mealType: "breakfast",
                            description: "Fluffy pancakes made with banana, eggs, and protein powder",
                            calories: 350, protein: 25, carbs: 28, fat: 12,
                            benefits: ["Muscle Building", "Natural Sweetness", "Gluten Free"],
                            image: "https://images.unsplash.com/photo-1554520735-0a6b8b6ce8b7?w=400&h=300&fit=crop"
                        },
                        {
                            id: 6, name: "Chia Seed Pudding", mealType: "breakfast",
                            description: "Creamy chia pudding with almond milk, vanilla, and fresh fruits",
                            calories: 260, protein: 8, carbs: 24, fat: 14,
                            benefits: ["Omega-3", "High Fiber", "Plant Protein"],
                            image: "https://images.unsplash.com/photo-1511690743698-d9d85f2fbf38?w=400&h=300&fit=crop"
                        }
                    ];
                },
                
                getLunchFoods() {
                    return [
                        {
                            id: 7, name: "Buddha Bowl Deluxe", mealType: "lunch",
                            description: "Quinoa, roasted vegetables, chickpeas, and tahini dressing",
                            calories: 420, protein: 16, carbs: 52, fat: 18,
                            benefits: ["Complete Nutrition", "Plant-Based", "Anti-Inflammatory"],
                            image: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop"
                        },
                        {
                            id: 8, name: "Grilled Salmon Salad", mealType: "lunch",
                            description: "Fresh Atlantic salmon over mixed greens with lemon vinaigrette",
                            calories: 380, protein: 32, carbs: 12, fat: 22,
                            benefits: ["Omega-3", "Heart Healthy", "Low Carb"],
                            image: "https://images.unsplash.com/photo-1551248429-40975aa4de74?w=400&h=300&fit=crop"
                        },
                        {
                            id: 9, name: "Mediterranean Wrap", mealType: "lunch",
                            description: "Whole wheat wrap with hummus, grilled chicken, and fresh vegetables",
                            calories: 340, protein: 24, carbs: 36, fat: 12,
                            benefits: ["Balanced Macros", "Mediterranean Diet", "Portable"],
                            image: "https://images.unsplash.com/photo-1565299585323-38174c19e655?w=400&h=300&fit=crop"
                        },
                        {
                            id: 10, name: "Quinoa Power Salad", mealType: "lunch",
                            description: "Tri-color quinoa with roasted sweet potato, kale, and pumpkin seeds",
                            calories: 360, protein: 14, carbs: 48, fat: 14,
                            benefits: ["Superfood", "Gluten Free", "Vitamin A"],
                            image: "https://images.unsplash.com/photo-1540420773420-3366772f4999?w=400&h=300&fit=crop"
                        },
                        {
                            id: 11, name: "Turkey & Veggie Soup", mealType: "lunch",
                            description: "Lean turkey breast with mixed vegetables in bone broth",
                            calories: 280, protein: 28, carbs: 20, fat: 8,
                            benefits: ["Low Calorie", "High Protein", "Immune Boost"],
                            image: "https://images.unsplash.com/photo-1547592180-85f173990554?w=400&h=300&fit=crop"
                        },
                        {
                            id: 12, name: "Sushi Bowl", mealType: "lunch",
                            description: "Brown rice with fresh tuna, avocado, edamame, and seaweed",
                            calories: 390, protein: 26, carbs: 42, fat: 12,
                            benefits: ["Lean Protein", "Healthy Fats", "Minerals"],
                            image: "https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?w=400&h=300&fit=crop"
                        }
                    ];
                },
                
                getDinnerFoods() {
                    return [
                        {
                            id: 13, name: "Herb-Crusted Chicken", mealType: "dinner",
                            description: "Grilled chicken breast with rosemary, steamed broccoli, and sweet potato",
                            calories: 450, protein: 38, carbs: 35, fat: 16,
                            benefits: ["Lean Protein", "Vitamin C", "Complex Carbs"],
                            image: "https://images.unsplash.com/photo-1532550907401-a500c9a57435?w=400&h=300&fit=crop"
                        },
                        {
                            id: 14, name: "Lentil Curry Bowl", mealType: "dinner",
                            description: "Red lentils in coconut curry with basmati rice and naan",
                            calories: 410, protein: 18, carbs: 58, fat: 12,
                            benefits: ["Plant Protein", "Fiber Rich", "Anti-Inflammatory"],
                            image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=400&h=300&fit=crop"
                        },
                        {
                            id: 15, name: "Zucchini Pasta Primavera", mealType: "dinner",
                            description: "Spiralized zucchini with cherry tomatoes, basil, and grilled shrimp",
                            calories: 320, protein: 28, carbs: 18, fat: 14,
                            benefits: ["Low Carb", "High Protein", "Antioxidants"],
                            image: "https://images.unsplash.com/photo-1551782450-a2132b4ba21d?w=400&h=300&fit=crop"
                        },
                        {
                            id: 16, name: "Stuffed Bell Peppers", mealType: "dinner",
                            description: "Bell peppers filled with ground turkey, quinoa, and vegetables",
                            calories: 380, protein: 26, carbs: 32, fat: 16,
                            benefits: ["Vitamin C", "Complete Meal", "Low Sodium"],
                            image: "https://images.unsplash.com/photo-1609501676725-7186f80f8ac8?w=400&h=300&fit=crop"
                        },
                        {
                            id: 17, name: "Grilled Portobello Steak", mealType: "dinner",
                            description: "Marinated portobello mushroom with quinoa pilaf and roasted asparagus",
                            calories: 290, protein: 12, carbs: 38, fat: 10,
                            benefits: ["Vegetarian", "Low Calorie", "Antioxidants"],
                            image: "https://images.unsplash.com/photo-1586816001966-79b736744398?w=400&h=300&fit=crop"
                        },
                        {
                            id: 18, name: "Miso Glazed Cod", mealType: "dinner",
                            description: "Pan-seared cod with miso glaze, bok choy, and brown rice",
                            calories: 360, protein: 32, carbs: 28, fat: 12,
                            benefits: ["Omega-3", "Low Mercury", "Umami Rich"],
                            image: "https://images.unsplash.com/photo-1559339352-11d035aa65de?w=400&h=300&fit=crop"
                        }
                    ];
                },
                
                getSnackFoods() {
                    return [
                        {
                            id: 19, name: "Energy Balls", mealType: "snack",
                            description: "Dates, almonds, cacao powder, and coconut rolled into bite-sized balls",
                            calories: 180, protein: 6, carbs: 22, fat: 8,
                            benefits: ["Natural Energy", "No Added Sugar", "Portable"],
                            image: "https://images.unsplash.com/photo-1606313564200-e75d5e30476c?w=400&h=300&fit=crop"
                        },
                        {
                            id: 20, name: "Apple with Almond Butter", mealType: "snack",
                            description: "Crisp Honeycrisp apple slices with natural almond butter",
                            calories: 220, protein: 8, carbs: 25, fat: 12,
                            benefits: ["Fiber", "Healthy Fats", "Natural Sugars"],
                            image: "https://images.unsplash.com/photo-1541554056943-6ad969638b1a?w=400&h=300&fit=crop"
                        },
                        {
                            id: 21, name: "Mixed Nuts & Seeds", mealType: "snack",
                            description: "Curated mix of almonds, walnuts, pumpkin seeds, and dried goji berries",
                            calories: 200, protein: 8, carbs: 12, fat: 16,
                            benefits: ["Heart Healthy", "Brain Food", "Antioxidants"],
                            image: "https://images.unsplash.com/photo-1508486652999-bc8d4772dafe?w=400&h=300&fit=crop"
                        },
                        {
                            id: 22, name: "Hummus & Veggies", mealType: "snack",
                            description: "Creamy chickpea hummus with carrot sticks, celery, and bell peppers",
                            calories: 160, protein: 7, carbs: 18, fat: 8,
                            benefits: ["Plant Protein", "Fiber", "Low Calorie"],
                            image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop"
                        },
                        {
                            id: 23, name: "Dark Chocolate Square", mealType: "snack",
                            description: "85% cacao dark chocolate with a handful of fresh berries",
                            calories: 140, protein: 3, carbs: 16, fat: 9,
                            benefits: ["Antioxidants", "Mood Boost", "Heart Health"],
                            image: "https://images.unsplash.com/photo-1511381939415-e44015466834?w=400&h=300&fit=crop"
                        },
                        {
                            id: 24, name: "Herbal Tea & Dates", mealType: "snack",
                            description: "Chamomile tea with 2 Medjool dates stuffed with almond butter",
                            calories: 190, protein: 4, carbs: 32, fat: 6,
                            benefits: ["Natural Sweetness", "Relaxing", "Potassium"],
                            image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=300&fit=crop"
                        }
                    ];
                },
                
                getCurrentMealTitle() {
                    const currentHour = new Date().getHours();
                    if (currentHour >= 5 && currentHour < 11) return "Energizing Breakfast";
                    if (currentHour >= 11 && currentHour < 16) return "Nourishing Lunch";
                    if (currentHour >= 16 && currentHour < 21) return "Satisfying Dinner";
                    return "Healthy Late-Night";
                },
                
                getTimeBasedMessage() {
                    const currentHour = new Date().getHours();
                    if (currentHour >= 5 && currentHour < 11) return "Start your day with these nutrient-packed breakfast options";
                    if (currentHour >= 11 && currentHour < 16) return "Fuel your afternoon with these balanced lunch choices";
                    if (currentHour >= 16 && currentHour < 21) return "End your day right with these wholesome dinner options";
                    return "Smart snacking choices for your late-night cravings";
                },
                
                chunkArray(array, size) {
                    const chunks = [];
                    for (let i = 0; i < array.length; i += size) {
                        chunks.push(array.slice(i, i + size));
                    }
                    return chunks;
                },
                
                startAutoAdvance() {
                    this.autoAdvanceInterval = setInterval(() => {
                        this.currentSlide = (this.currentSlide + 1) % this.healthyFoods.length;
                    }, 8000); // Change slide every 8 seconds
                },
                
                stopAutoAdvance() {
                    if (this.autoAdvanceInterval) {
                        clearInterval(this.autoAdvanceInterval);
                    }
                }
            }
        }

        // Enhanced dropdown interaction functions
        function enhanceDropdowns() {
            const selects = document.querySelectorAll('select');
            
            selects.forEach(select => {
                // Add loading animation on change
                select.addEventListener('change', function() {
                    this.classList.add('loading');
                    setTimeout(() => {
                        this.classList.remove('loading');
                    }, 800);
                });
                
                // Add focus effects with bounce animation
                select.addEventListener('focus', function() {
                    this.style.animation = 'dropdown-bounce 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                });
                
                // Reset animation
                select.addEventListener('animationend', function() {
                    this.style.animation = '';
                });
                
                // Add hover effects
                select.addEventListener('mouseenter', function() {
                    if (this !== document.activeElement) {
                        this.style.transform = 'translateY(-2px) scale(1.01)';
                    }
                });
                
                select.addEventListener('mouseleave', function() {
                    if (this !== document.activeElement) {
                        this.style.transform = '';
                    }
                });

                // Enhanced click effect for mobile
                select.addEventListener('touchstart', function(e) {
                    this.style.transform = 'scale(0.98)';
                });

                select.addEventListener('touchend', function(e) {
                    this.style.transform = '';
                    // Trigger focus animation on mobile
                    setTimeout(() => {
                        this.style.animation = 'dropdown-bounce 0.3s ease-out';
                    }, 50);
                });
            });
        }

        // Initialize enhanced dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            enhanceDropdowns();
            
            // Re-enhance dropdowns if new ones are added dynamically
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === 1) { // Element node
                                const newSelects = node.querySelectorAll ? node.querySelectorAll('select') : [];
                                if (newSelects.length > 0) {
                                    enhanceDropdowns();
                                }
                                if (node.tagName === 'SELECT') {
                                    enhanceDropdowns();
                                }
                            }
                        });
                    }
                });
            });

            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    </script>

    <!-- Footer with Cravotics Studios Branding -->
    <footer x-show="!initialLoading" 
            x-transition:enter="transition ease-out duration-500 delay-300"
            x-transition:enter-start="opacity-0 transform translateY(20px)"
            x-transition:enter-end="opacity-100 transform translateY(0)"
            class="bg-gradient-to-r from-slate-900 via-purple-900 to-slate-900 border-t border-white/10 py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <!-- Main neXtaste branding -->
                <div class="mb-4">
                    <h3 class="text-2xl font-hero font-bold text-white mb-2">
                        ne<span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500 animate-x-glow">X</span>taste
                    </h3>
                    <p class="text-white/70 italic">"Your next taste will be bliss"</p>
                </div>

                <!-- Cravotics Studios Credit -->
                <div class="border-t border-white/10 pt-4">
                    <div class="flex items-center justify-center space-x-3 mb-3">
                        <div class="w-8 h-8 bg-gradient-to-r from-orange-400 to-red-500 rounded-lg flex items-center justify-center animate-pulse">
                            <span class="text-white font-bold text-sm">C</span>
                        </div>
                        <div>
                            <p class="text-white font-semibold">
                                Delivered from 
                                <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500 font-bold">
                                    Cravotics Studios
                                </span> 
                                by 
                                <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500 font-bold">
                                    SJ
                                </span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- Social links -->
                    <div class="flex justify-center space-x-6 text-white/60 text-sm mb-3">
                        <a href="https://github.com/yourusername" target="_blank" rel="noopener noreferrer" 
                           class="hover:text-cyan-400 transition-colors duration-300 transform hover:scale-110">
                            <i class="fab fa-github mr-2"></i>GitHub
                        </a>
                        <a href="https://linkedin.com/in/yourprofile" target="_blank" rel="noopener noreferrer"
                           class="hover:text-purple-400 transition-colors duration-300 transform hover:scale-110">
                            <i class="fab fa-linkedin mr-2"></i>LinkedIn
                        </a>
                        <a href="mailto:your.email@example.com" 
                           class="hover:text-orange-400 transition-colors duration-300 transform hover:scale-110">
                            <i class="fas fa-envelope mr-2"></i>Contact
                        </a>
                    </div>
                    
                    <p class="text-white/40 text-xs">
                        © 2025 Cravotics Studios. Crafted with superhero-grade code and infinite passion for taste.
                    </p>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
